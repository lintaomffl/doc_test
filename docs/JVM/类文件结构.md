# 类文件结构

 [TOC]



## 1. Class类文件结构

### 1.1 魔数与Class文件版本

**魔数：**CA FE BA BE

**主版本号、次版本号**（可转换成十进制数进行版本号识别）

### 1.2 常量池 

**def：**用来存放常量性的一些常量数据。

**字面量：**一些诸如文本常量、final常量的常量数据。

**符号引用**：对于类进行了描述（类、接口的全限定名，字段的名称和描述符，方法的名称和描述符）

### 访问标志

**def**：定义了最大层级（这一个Class文件最大层级，即这个类文件）的标志信息，诸如：

访问权限、是否final、SUPER（jdk1.0.2以后借本为true）、是否为接口、是否为abstract类、是否为注解、是否为枚举、是否为非用户代码产生的

### 1.3 类索引、父类索引与接口索引集合

**def：**定义着这个类的继承情况。

类索引

唯一继承的父类的索引

因为接口可以多继承（实现），所以以索引集合的形式进行一个记录。故入口第一位通常是集合中索引数目。

### 1.4 字段表集合   

**def:**用来描述接口或者类中声明的变量信息

全限定名：该名称包含了路径信息，从而具体地描述了一个字段

简单名称：字段信息的简写

描述符: 用来描述字段的数据类型、方法的参数列表、返回值。

### 1.5 方法表集合

**def：**记录了类中的方法的主要内容。

Java里方法**重载**（**Overload**）体现在class类文件上的话，即除了**与原方法有相同的简单名**称以外，还要有**不同的签名特征**，而且**签名特征就是一个方法中各个参数在常量池中的字段符号引用的集合**，所以返回值不包含在签名特征里。所以体现在语言上，方法重载**不能通过不同的返回值重载**，**可以通过设定不同的参数进行重载**。



### 1.6 属性表集合

**def：**用来描述一些属性性质的信息。Class文件、字段表、方法表都有属性表集合。

### 1.6.1 code属性

**结构：** 属性名称索引、属性值长度、操作数栈、局部变量表的存储空间、代码长度、代码、exception_table（异常处理的表格，**finally的处理机制是靠冗余生成finally语义来实现的**。）

### 1.6.2 Exceptions属性

该属性不同于上面的exception_table。

